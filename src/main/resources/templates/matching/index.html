<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>í”„ë¡œì íŠ¸ ì¶”ì²œ</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        /* ì¶”ì²œ ë²„íŠ¼ ì»¨í…Œì´ë„ˆ */
        .recommend-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        /* í° ì¶”ì²œ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .rec-btn {
            flex: 1;
            min-width: 200px;
            text-align: center;
            padding: 30px 20px;
            border: 2px solid #eee;
            border-radius: 15px;
            background: white;
            text-decoration: none;
            color: #333;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .rec-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            border-color: #007bff;
        }

        .rec-btn.active {
            border-color: #007bff;
            background-color: #f8fbff;
            box-shadow: 0 0 0 4px rgba(0,123,255,0.1);
        }

        .rec-icon { font-size: 32px; margin-bottom: 5px; }
        .rec-title { font-size: 18px; font-weight: bold; }
        .rec-desc { font-size: 13px; color: #888; }

        /* ê²°ê³¼ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .match-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .match-card {
            background: white;
            border: 1px solid #e1e4e8;
            border-radius: 12px;
            padding: 20px;
            position: relative;
            transition: 0.2s;
            text-decoration: none; color: inherit; display: block;
        }
        .match-card:hover { transform: translateY(-3px); border-color: #007bff; }

        .match-score-badge {
            background: #fff0f6; color: #d6336c;
            font-weight: 800; font-size: 13px;
            padding: 5px 10px; border-radius: 8px;
            display: inline-block; margin-bottom: 10px;
        }
    </style>
</head>
<body>

<div class="container" style="max-width: 1000px;">

    <div style="text-align: center; margin-bottom: 30px;">
        <h1>ğŸ¤ í”„ë¡œì íŠ¸ ì¶”ì²œ</h1>
        <p class="subtitle">ë‚˜ì—ê²Œ ë”± ë§ëŠ” ìµœê³ ì˜ íŒ€ì„ ì°¾ì•„ë³´ì„¸ìš”.</p>
        <a href="/" class="btn btn-outline" style="font-size: 13px;">ğŸ  í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>

    <div class="recommend-buttons">
        <a href="/matching?type=mbti" class="rec-btn" th:classappend="${currentType == 'mbti'} ? 'active'">
            <span class="rec-icon">ğŸ§ </span>
            <span class="rec-title">MBTI ì¶”ì²œ</span>
            <span class="rec-desc">ë‚˜ì™€ ì„±í–¥ì´ ì˜ ë§ëŠ” íŒ€</span>
        </a>

        <a href="/matching?type=tech" class="rec-btn" th:classappend="${currentType == 'tech'} ? 'active'">
            <span class="rec-icon">ğŸ’»</span>
            <span class="rec-title">ê¸°ìˆ  ìŠ¤íƒ ì¶”ì²œ</span>
            <span class="rec-desc">ë‚´ê°€ ê°€ì§„ ê¸°ìˆ ì„ í•„ìš”ë¡œ í•˜ëŠ” íŒ€</span>
        </a>

        <a href="/matching?type=combined" class="rec-btn" th:classappend="${currentType == 'combined'} ? 'active'">
            <span class="rec-icon">âœ¨</span>
            <span class="rec-title">ì¢…í•© ì¶”ì²œ</span>
            <span class="rec-desc">ì„±í–¥ê³¼ ê¸°ìˆ ì„ ëª¨ë‘ ê³ ë ¤í•œ ìµœì ì˜ íŒ€</span>
        </a>
    </div>

    <hr>

    <div th:if="${currentType == null}" style="text-align: center; padding: 50px; color: #999;">
        ğŸ‘† ìœ„ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¶”ì²œ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!
    </div>

    <div th:if="${currentType != null}">
        <h3 style="border-left: 4px solid #007bff; padding-left: 12px; margin-bottom: 20px;"
            th:text="${matchTitle}">ì¶”ì²œ ê²°ê³¼</h3>

        <div th:if="${results == null || results.isEmpty()}"
             style="text-align: center; padding: 60px; background: #f9f9f9; border-radius: 10px; color: #888;">
            <p style="font-size: 18px;">ì¡°ê±´ì— ë§ëŠ” í”„ë¡œì íŠ¸ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ğŸ˜¢</p>
            <p style="font-size: 14px;">ë‚´ ì •ë³´ì—ì„œ MBTIë‚˜ ê¸°ìˆ  ìŠ¤íƒì„ ë“±ë¡í–ˆëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”!</p>
            <a href="/members/mypage" class="btn btn-primary" style="margin-top: 15px;">ë‚´ ì •ë³´ í™•ì¸í•˜ê¸°</a>
        </div>

        <div class="match-grid" th:if="${results != null && !results.isEmpty()}">

            <a th:each="project, stat : ${results}"
               th:href="@{/projects/{id}(id=${project.id})}"
               class="match-card">

                <div style="position: absolute; top: 20px; right: 20px; font-size: 20px;">
                    <span th:if="${stat.count == 1}">ğŸ¥‡</span>
                    <span th:if="${stat.count == 2}">ğŸ¥ˆ</span>
                    <span th:if="${stat.count == 3}">ğŸ¥‰</span>
                </div>

                <span class="match-score-badge" th:text="|ë§¤ì¹­ ì ìˆ˜: ${project.score}ì |">10ì </span>

                <div style="font-size: 18px; font-weight: bold; color: #333; margin-bottom: 10px;"
                     th:text="${project.title}">ì œëª©</div>

                <div style="font-size: 14px; color: #666; background: #f8f9fa; padding: 10px; border-radius: 8px;">
                    <span th:text="${project.description}">ë§¤ì¹­ ìƒì„¸ ì´ìœ ...</span>
                </div>

                <div style="margin-top: 15px; text-align: right; font-size: 13px; color: #007bff; font-weight: bold;">
                    ìì„¸íˆ ë³´ê¸° â†’
                </div>
            </a>

        </div>
    </div>

</div>

</body>
</html>