<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>í”„ë¡œì íŠ¸ ìƒì„¸</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        /* ìƒì„¸ í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ */
        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }
        .detail-header h1 {
            margin: 0;
            text-align: left;
            font-size: 26px;
            line-height: 1.2;
        }

        .detail-section {
            background: #fff;
            border: 1px solid #e1e4e8;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.03);
        }

        .section-title {
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 18px;
            color: #333;
            border-left: 4px solid #007bff;
            padding-left: 12px;
        }

        .tech-tags-container { display: flex; flex-wrap: wrap; gap: 8px; }
        .mbti-card { background: #f8f9fa; border: 1px solid #eee; border-radius: 10px; padding: 12px 20px; display: flex; align-items: center; }

        /* ëª¨ì§‘ í˜„í™© ë±ƒì§€ ìŠ¤íƒ€ì¼ */
        .recruit-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            background-color: #eef2ff;
            color: #4f46e5;
            margin-top: 8px;
        }
        /* ë§ˆê°ë˜ì—ˆì„ ë•Œ ë¹¨ê°„ìƒ‰ ì²˜ë¦¬ */
        .recruit-badge.full {
            background-color: #fff5f5;
            color: #e03131;
            border: 1px solid #ffc9c9;
        }
    </style>
</head>
<body>

<div class="container" style="max-width: 800px;">

    <div class="detail-header">
        <div>
            <h1>ğŸ’» <span th:text="${project.title}">í”„ë¡œì íŠ¸ ì œëª©</span></h1>

            <div>
                <span class="recruit-badge"
                      th:classappend="${project.currentCount >= project.maxCount} ? 'full'"
                      th:text="|ğŸ‘¥ ëª¨ì§‘ í˜„í™©: ${project.currentCount} / ${project.maxCount} ëª…|">
                    1 / 4 ëª…
                </span>
                <span th:if="${project.currentCount >= project.maxCount}"
                      style="font-size: 14px; font-weight: bold; color: #e03131; margin-left: 5px;">
                    (ë§ˆê°)
                </span>
            </div>
        </div>

        <a href="/projects/my" class="btn btn-outline" style="font-size: 14px; padding: 8px 15px;">
            â† ëª©ë¡ìœ¼ë¡œ
        </a>
    </div>

    <div class="detail-section">
        <h3 class="section-title">1. í”„ë¡œì íŠ¸ ì„¤ëª…</h3>
        <div style="line-height: 1.8; color: #555; white-space: pre-wrap;"
             th:text="${project.description}">
            ë‚´ìš©
        </div>
    </div>

    <div class="detail-section">
        <h3 class="section-title">2. ì‚¬ìš© ê¸°ìˆ  ìŠ¤íƒ</h3>
        <div class="tech-tags-container">
            <th:block th:if="${techSpecs != null && !techSpecs.isEmpty()}">
                <span th:each="spec : ${techSpecs}"
                      class="badge"
                      style="font-size: 14px; padding: 6px 12px;"
                      th:text="${spec.name}">Java</span>
            </th:block>
            <span th:if="${techSpecs == null || techSpecs.isEmpty()}" style="color: #999;">
                ë“±ë¡ëœ ê¸°ìˆ  ìŠ¤íƒì´ ì—†ìŠµë‹ˆë‹¤.
            </span>
        </div>
    </div>

    <div class="detail-section">
        <h3 class="section-title">3. ì„ í˜¸ MBTI</h3>
        <div style="display: flex; flex-wrap: wrap; gap: 15px;">
            <div th:each="entry : ${mbtiMap}" class="mbti-card">
                <span style="color: #666; font-size: 13px; font-weight: bold; margin-right: 12px;">
                    <span th:text="'# ëª¨ì§‘ ' + ${entry.key}"># ëª¨ì§‘ 1</span>
                </span>
                <span style="background-color: #eef2ff; color: #4f46e5; padding: 6px 14px; border-radius: 20px; font-weight: 800; font-size: 16px; letter-spacing: 1px;"
                      th:text="${entry.value}">ENTP</span>
            </div>
            <div th:if="${mbtiMap == null || mbtiMap.isEmpty()}"
                 style="padding: 20px; color: #888; font-style: italic; background: #f9f9f9; border-radius: 8px; width: 100%; text-align: center;">
                ğŸŒˆ MBTI ì œí•œ ì—†ìŒ (ëˆ„êµ¬ë‚˜ í™˜ì˜í•©ë‹ˆë‹¤!)
            </div>
        </div>
    </div>

    <div class="detail-section" style="border-color: #007bff; background-color: #f8fbff;">
        <h3 class="section-title" style="margin-bottom: 15px;">ğŸš€ í”„ë¡œì íŠ¸ ì°¸ì—¬</h3>

        <div th:if="${myRole == 'LEADER'}">
            <a th:href="@{/projects/{id}/manage(id=${project.id})}" class="btn btn-primary btn-block">
                ğŸ‘¥ ì‹ ì²­ì ê´€ë¦¬ (ë¦¬ë” ì „ìš©)
            </a>
        </div>

        <div th:if="${myRole == 'MEMBER'}">
            <button class="btn btn-success btn-block" disabled style="opacity: 1; cursor: default;">
                âœ… í˜„ì¬ íŒ€ì›ìœ¼ë¡œ ì°¸ì—¬ ì¤‘ì…ë‹ˆë‹¤.
            </button>
        </div>

        <div th:if="${myRole == 'PENDING'}">
            <button class="btn btn-secondary btn-block" disabled style="cursor: default;">
                ğŸ•’ ë¦¬ë”ì˜ ìŠ¹ì¸ì„ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤...
            </button>
        </div>

        <div th:if="${myRole == null}">
            <form th:if="${project.currentCount < project.maxCount}"
                  th:action="@{|/projects/${project.id}/apply|}" method="post">
                <button type="submit" class="btn btn-primary btn-block"
                        onclick="return confirm('í”„ë¡œì íŠ¸ì— ì°¸ê°€ ì‹ ì²­í•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
                    ğŸš€ ì°¸ê°€ ì‹ ì²­í•˜ê¸°
                </button>
            </form>

            <button th:if="${project.currentCount >= project.maxCount}"
                    class="btn btn-danger btn-block" disabled>
                ğŸš« ëª¨ì§‘ì´ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤.
            </button>
        </div>
    </div>

    <div class="detail-section" style="background: #fbfbfc;">
        <h3 class="section-title" style="border-left-color: #28a745;">5. í”„ë¡œì íŠ¸ í™œë™ (íŒ€ì› ì „ìš©)</h3>

        <div class="menu-grid" style="margin-top: 10px;"
             th:styleappend="${myRole != 'LEADER' and myRole != 'MEMBER'} ? 'opacity: 0.5; pointer-events: none;' : ''">
            <button class="btn btn-outline btn-block" style="color: #555; background: white; padding: 15px;">
                ğŸ“‹ ê²Œì‹œíŒ ë³´ê¸°
            </button>
            <button class="btn btn-outline btn-block" style="color: #555; background: white; padding: 15px;">
                ğŸ“… ì¼ì • ê´€ë¦¬
            </button>
            <button class="btn btn-outline btn-block" style="color: #555; background: white; padding: 15px;">
                ğŸ’¬ íŒ€ ì±„íŒ…
            </button>
        </div>

        <div th:if="${myRole != 'LEADER' and myRole != 'MEMBER'}"
             style="text-align: center; font-size: 13px; color: #999; margin-top: 10px;">
            * í”„ë¡œì íŠ¸ íŒ€ì›ì´ ë˜ë©´ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </div>
    </div>

</div>

</body>
</html>