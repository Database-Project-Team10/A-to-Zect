<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>AtoZect - ì „ì²´ í”„ë¡œì íŠ¸</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">

    <style>
        /* ... (ê¸°ì¡´ ìŠ¤íƒ€ì¼ ë™ì¼) ... */
        .header-nav { display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; padding-bottom: 20px; border-bottom: 1px solid #eee; }
        .brand-logo { font-size: 24px; font-weight: 800; color: #007bff; text-decoration: none; }
        .auth-links a { margin-left: 15px; font-size: 14px; font-weight: 600; color: #555; }
        .auth-links a:hover { color: #007bff; }
        .project-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
        .project-card { background: white; border: 1px solid #e1e4e8; border-radius: 12px; padding: 20px; text-align: left; transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s; display: flex; flex-direction: column; height: 100%; text-decoration: none; color: inherit; }
        .project-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.08); border-color: #007bff; }
        .card-title { font-size: 18px; font-weight: bold; color: #333; margin-bottom: 10px; display: block; }
        .card-desc { font-size: 14px; color: #666; line-height: 1.5; flex-grow: 1; margin-bottom: 15px; }
        .card-footer { margin-top: auto; display: flex; justify-content: space-between; align-items: center; font-size: 12px; color: #999; }

        /* [ìˆ˜ì •] ë±ƒì§€ ìŠ¤íƒ€ì¼ */
        .badge-status {
            padding: 4px 8px; border-radius: 4px; font-weight: bold; font-size: 12px;
        }
        /* ëª¨ì§‘ ì¤‘ (íŒŒë€ìƒ‰) */
        .badge-active { background-color: #eef2ff; color: #4f46e5; }
        /* ëª¨ì§‘ ì™„ë£Œ (íšŒìƒ‰/ë¶‰ì€ìƒ‰) */
        .badge-closed { background-color: #f1f3f5; color: #868e96; border: 1px solid #dee2e6; }
    </style>
</head>
<body>

<div class="container" style="max-width: 1000px;">
    <div class="header-nav">
        <a href="/" class="brand-logo">AtoZect</a>
        <div class="auth-links">
            <span th:if="${session.loginMember == null}">
                <a href="/members/login">ë¡œê·¸ì¸</a>
                <a href="/members/signup" class="btn btn-primary" style="color:white; padding: 8px 15px; border-radius: 20px;">íšŒì›ê°€ì…</a>
            </span>
            <span th:if="${session.loginMember != null}">
                <span style="margin-right: 10px; color: #333;">
                    ğŸ‘‹ <strong th:text="${session.loginMember.name}">ì‚¬ìš©ì</strong>ë‹˜
                </span>
                <a href="/members/mypage">ë‚´ ì •ë³´</a>
                <a href="/members/logout" style="color: #dc3545;">ë¡œê·¸ì•„ì›ƒ</a>
            </span>
        </div>
    </div>

    <div style="text-align: center; margin-bottom: 40px;">
        <h1>ì „ì²´ í”„ë¡œì íŠ¸ ëª©ë¡</h1>
        <p class="subtitle">í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ëª¨ë“  í”„ë¡œì íŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
        <div th:if="${session.loginMember != null}" class="menu-grid" style="max-width: 500px; margin: 0 auto;">
            <button class="btn btn-outline" onclick="location.href='/projects/create'">â• í”„ë¡œì íŠ¸ ìƒì„±</button>
            <button class="btn btn-outline" onclick="location.href='/projects/my'">ğŸ“‚ ë‚´ í”„ë¡œì íŠ¸</button>
        </div>
    </div>
    <div class="search-container" style="text-align: center; margin-bottom: 40px;">
        <form action="/projects" method="get" style="display: flex; justify-content: center; align-items: center; gap: 10px; max-width: 600px; margin: 0 auto;">
            
            <input type="text" name="keyword" th:value="${keyword}" 
                   placeholder="ê´€ì‹¬ ìˆëŠ” í”„ë¡œì íŠ¸ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”..." 
                   style="flex-grow: 1; height: 50px; padding: 0 20px; border-radius: 25px; border: 1px solid #ddd; font-size: 16px; box-sizing: border-box; margin: 0;">
            
            <button type="submit" class="btn btn-primary" 
                    style="height: 50px; padding: 0 25px; border-radius: 25px; font-size: 16px; font-weight: bold; white-space: nowrap; box-sizing: border-box; margin: 0; display: inline-flex; align-items: center; justify-content: center;">
                ê²€ìƒ‰
            </button>
        </form>
    </div>
    <div class="project-section" style="border-top: none;">
        <div style="margin-bottom: 15px;">
            <h3 style="margin: 0; border: none; padding: 0;">ğŸ“‹ ë“±ë¡ëœ ì „ì²´ í”„ë¡œì íŠ¸</h3>
        </div>

        <div class="project-grid">
            <div th:if="${projects == null || projects.isEmpty()}"
                 style="grid-column: 1 / -1; text-align: center; padding: 60px; background: #f9f9f9; border-radius: 10px; color: #888;">
                <p style="font-size: 18px; margin-bottom: 10px;">ë“±ë¡ëœ í”„ë¡œì íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                <p>ì²« ë²ˆì§¸ í”„ë¡œì íŠ¸ì˜ ì£¼ì¸ê³µì´ ë˜ì–´ë³´ì„¸ìš”!</p>
            </div>

            <a th:each="project : ${projects}"
               th:href="@{/projects/{id}(id=${project.id})}"
               class="project-card">

                <span class="card-title" th:text="${project.title}">í”„ë¡œì íŠ¸ ì œëª©</span>

                <p class="card-desc"
                   th:text="${#strings.abbreviate(project.description, 50)}">
                    ì„¤ëª…...
                </p>

                <div class="card-footer">
                    <span th:if="${project.currentCount >= project.maxCount}"
                          class="badge-status badge-closed">
                        ğŸ”’ ëª¨ì§‘ ì™„ë£Œ
                    </span>
                    <span th:if="${project.currentCount < project.maxCount}"
                          class="badge-status badge-active"
                          th:text="|ğŸ‘¥ ${project.currentCount}/${project.maxCount} ëª…|">
                        2/5 ëª…
                    </span>

                    <span>ìƒì„¸ë³´ê¸° â†’</span>
                </div>
            </a>
        </div>
    </div>
</div>

</body>
</html>